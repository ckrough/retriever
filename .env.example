# Application Configuration
APP_NAME=Retriever
APP_VERSION=0.1.0
DEBUG=false  # Set to true only for local development

# Server
HOST=0.0.0.0
PORT=8000

# LLM Provider (OpenRouter)
OPENROUTER_API_KEY=your-api-key-here  # Get from https://openrouter.ai/keys
LLM_MODEL=anthropic/claude-sonnet-4  # Primary model
LLM_FALLBACK_MODEL=anthropic/claude-haiku  # Fallback for resilience
LLM_TIMEOUT_SECONDS=30.0  # Request timeout
LLM_ENABLE_PROMPT_CACHING=true  # Enable Anthropic prompt caching for cost reduction

# Rate limiting
RATE_LIMIT_REQUESTS=10  # Requests allowed per window
RATE_LIMIT_WINDOW=minute  # Window: second, minute, hour, day

# Circuit breaker
CIRCUIT_BREAKER_FAIL_MAX=5  # Open circuit after N failures
CIRCUIT_BREAKER_TIMEOUT=60.0  # Seconds before retry

# Embeddings (via OpenRouter)
EMBEDDING_API_KEY=your-openrouter-api-key-here  # Same as OPENROUTER_API_KEY
EMBEDDING_MODEL=openai/text-embedding-3-small
EMBEDDING_TIMEOUT_SECONDS=30.0

# Chroma Vector Database
CHROMA_PERSIST_PATH=./data/chroma  # Directory for Chroma persistence
CHROMA_COLLECTION_NAME=retriever_documents  # Collection name

# RAG Settings
RAG_CHUNK_SIZE=1500  # Maximum characters per chunk
RAG_CHUNK_OVERLAP=800  # Overlap between chunks
RAG_TOP_K=5  # Number of chunks to retrieve
DOCUMENTS_PATH=./documents  # Directory containing policy documents

# Semantic Cache (for faster repeated questions)
CACHE_ENABLED=true  # Enable semantic caching
CACHE_SIMILARITY_THRESHOLD=0.95  # Similarity threshold for cache hit (0-1)
CACHE_TTL_HOURS=24  # Cache entry time-to-live in hours

# Hybrid Retrieval (combines semantic + keyword search)
HYBRID_RETRIEVAL_ENABLED=true  # Enable hybrid retrieval for better accuracy
HYBRID_SEMANTIC_WEIGHT=0.5  # Weight for semantic search (0-1)
HYBRID_KEYWORD_WEIGHT=0.5  # Weight for keyword search (0-1)
HYBRID_RRF_K=60  # RRF constant (higher = more uniform ranking)

# Content Safety
SAFETY_ENABLED=true  # Enable content safety checks
OPENAI_API_KEY=your-openai-api-key-here  # For moderation API (free, get from https://platform.openai.com/api-keys)
MODERATION_TIMEOUT_SECONDS=10.0  # Moderation API timeout
HALLUCINATION_THRESHOLD=0.8  # Minimum claim support ratio (0-1)

# Database
DATABASE_PATH=./data/retriever.db  # SQLite database path

# Authentication
AUTH_ENABLED=true  # Enable user authentication
JWT_SECRET_KEY=change-this-to-a-random-secret-key  # Secret key for JWT signing (REQUIRED if auth enabled)
JWT_ALGORITHM=HS256  # JWT signing algorithm
JWT_EXPIRE_HOURS=24  # Token expiration in hours
